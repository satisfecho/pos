services:
  front:
    build:
      context: ./front
      dockerfile: Dockerfile.prod
    container_name: pos-front
    restart: unless-stopped
    ports:
      - "${FRONTEND_PORT:-4200}:80"
    environment:
      - API_URL=${API_URL:-/api}
      - WS_URL=${WS_URL:-}
    depends_on:
      - db
      - redis
      - ws-bridge
      - back

  # Production: secure localhost-only binding
  haproxy:
    ports:
      - "127.0.0.1:${FRONTEND_PORT:-4202}:4202"
